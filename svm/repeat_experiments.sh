#!/bin/bash

#MODEL=ae2D_bn_on_buildnet
#MODEL=ae2D_no_bn_on_buildnet
#FEATURES_DIR=/media/graphicslab/BigData1/zavou/ANNFASS_CODE/2dae_results/train_on_buildnet/bn/encodings
#SVM_IMPL=unique
FEATURES_DIR=$1
MODEL=$2
SPECIFIC_DIR_ARGS=$3
SVM_IMPL=$4
OVERRIDE_LABELS=$5
PART_SEGMENTATION_BASED=$6
COMPONENTS_CSV=$7
OVERRIDE_SVM=$8
echo "FEATURES_DIR=${FEATURES_DIR}"
echo "MODEL=${MODEL}"
echo "SPECIFIC_DIR_ARGS=${SPECIFIC_DIR_ARGS}"
echo "SVM_IMPL=${SVM_IMPL}"
echo "OVERRIDE_LABELS=${OVERRIDE_LABELS}"
echo "PART_SEGMENTATION_BASED=${PART_SEGMENTATION_BASED}"
echo "COMPONENTS_CSV=${COMPONENTS_CSV}"
echo "OVERRIDE_SVM=${OVERRIDE_SVM}"


IGNORE_CLASSES=Modernist,Pagoda,Renaissance,Russian,Venetian,Unknown
UNIQUE_DIRS_ARGS="--unique_dirs /media/graphicslab/BigData1/zavou/ANNFASS_DATA/BUILDNET_Buildings/groups_june17_unique_point_clouds,/media/graphicslab/BigData1/zavou/ANNFASS_DATA/ANNFASS_Buildings_may/unique_point_clouds"

make csv-generation-wrapper FEATURES_DIR=${FEATURES_DIR} MODEL=${MODEL} SPECIFIC_DIR_ARGS="${SPECIFIC_DIR_ARGS}" OVERRIDE_LABELS=${OVERRIDE_LABELS} PS_BASED=${PART_SEGMENTATION_BASED} COMPONENTS_CSV=${COMPONENTS_CSV} EXPERIMENT_REPEAT=0

make run-svm-wrapper MODEL=${MODEL} SVM_IMPL=${SVM_IMPL} IGNORE_CLASSES=${IGNORE_CLASSES} UNIQUE_DIRS_ARGS="${UNIQUE_DIRS_ARGS}" EXPERIMENT_REPEAT=0 OVERRIDE_SVM=${OVERRIDE_SVM}

make csv-generation-wrapper FEATURES_DIR=${FEATURES_DIR} MODEL=${MODEL} SPECIFIC_DIR_ARGS="${SPECIFIC_DIR_ARGS}" OVERRIDE_LABELS=${OVERRIDE_LABELS} PS_BASED=${PART_SEGMENTATION_BASED} COMPONENTS_CSV=${COMPONENTS_CSV} EXPERIMENT_REPEAT=1

make run-svm-wrapper MODEL=${MODEL} SVM_IMPL=${SVM_IMPL} IGNORE_CLASSES=${IGNORE_CLASSES} UNIQUE_DIRS_ARGS="${UNIQUE_DIRS_ARGS}" EXPERIMENT_REPEAT=1 OVERRIDE_SVM=${OVERRIDE_SVM}

make csv-generation-wrapper FEATURES_DIR=${FEATURES_DIR} MODEL=${MODEL} SPECIFIC_DIR_ARGS="${SPECIFIC_DIR_ARGS}" OVERRIDE_LABELS=${OVERRIDE_LABELS} PS_BASED=${PART_SEGMENTATION_BASED} COMPONENTS_CSV=${COMPONENTS_CSV} EXPERIMENT_REPEAT=2

make run-svm-wrapper MODEL=${MODEL} SVM_IMPL=${SVM_IMPL} IGNORE_CLASSES=${IGNORE_CLASSES} UNIQUE_DIRS_ARGS="${UNIQUE_DIRS_ARGS}" EXPERIMENT_REPEAT=2 OVERRIDE_SVM=${OVERRIDE_SVM}

make csv-generation-wrapper FEATURES_DIR=${FEATURES_DIR} MODEL=${MODEL} SPECIFIC_DIR_ARGS="${SPECIFIC_DIR_ARGS}" OVERRIDE_LABELS=${OVERRIDE_LABELS} PS_BASED=${PART_SEGMENTATION_BASED} COMPONENTS_CSV=${COMPONENTS_CSV} EXPERIMENT_REPEAT=3

make run-svm-wrapper MODEL=${MODEL} SVM_IMPL=${SVM_IMPL} IGNORE_CLASSES=${IGNORE_CLASSES} UNIQUE_DIRS_ARGS="${UNIQUE_DIRS_ARGS}" EXPERIMENT_REPEAT=3 OVERRIDE_SVM=${OVERRIDE_SVM}

make csv-generation-wrapper FEATURES_DIR=${FEATURES_DIR} MODEL=${MODEL} SPECIFIC_DIR_ARGS="${SPECIFIC_DIR_ARGS}" OVERRIDE_LABELS=${OVERRIDE_LABELS} PS_BASED=${PART_SEGMENTATION_BASED} COMPONENTS_CSV=${COMPONENTS_CSV} EXPERIMENT_REPEAT=4

make run-svm-wrapper MODEL=${MODEL} SVM_IMPL=${SVM_IMPL} IGNORE_CLASSES=${IGNORE_CLASSES} UNIQUE_DIRS_ARGS="${UNIQUE_DIRS_ARGS}" EXPERIMENT_REPEAT=4 OVERRIDE_SVM=${OVERRIDE_SVM}

